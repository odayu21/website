"use strict";(self.webpackChunkthree_shader_env01=self.webpackChunkthree_shader_env01||[]).push([[565],{565(e,i,t){t.r(i),t.d(i,{default:()=>n});var s=t(437);class n{constructor(e){this.canvas=e,this.isRunning=!1,this.sizes={width:window.innerWidth,height:window.innerHeight},this.cursor={x:0,y:0},this.targetCameraPosition=new s.Pq0,this.init()}init(){this.scene=new s.Z58,this.camera=new s.ubm(65,this.sizes.width/this.sizes.height,.1,1e3),this.camera.position.z=1.2,this.scene.add(this.camera),this.renderer=new s.JeP({canvas:this.canvas}),this.renderer.setSize(this.sizes.width,this.sizes.height),this.geometry=new s.UPV(1,.5,120,120),this.uniforms={},this.uniforms.u_time={value:0},this.material=new s.BKk({uniforms:this.uniforms,vertexShader:"uniform float u_time;\nvarying vec3 vPos;\n\nvoid main() {\n  float delta = (sin(u_time*0.8)+0.7)/8.0;\n  vec3 pos = position;\n  vec3 pos2 = normalize(position) * 3.0;\n  pos.y += sin(u_time*0.2 + length(pos.xz)*4.0)/5.0;\n  vec3 pos3 = mix(pos,pos2,delta);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos3, 1.0 );\n  vPos = normalize((modelMatrix * vec4(normal, 0.0)).xyz);\n}",fragmentShader:"uniform float u_time;\nvarying vec3 vPos;\n\n\nvoid main(){\n  float range = 0.7;\n  float delta = (sin(u_time * 0.8) + 1.0) / 2.0;\n  float delta2 = (sin(u_time * 1.4) + 1.0) / 2.0;\n  float angle = mix(vPos.z, vPos.x, delta2);\n  vec3 color = vec3(angle * range + vec3(range) * delta);\n  // vec3 color = vec3(angle * range + vec3(range) * delta);\n  gl_FragColor = vec4(color, 0.2);\n\n}",transparent:!0,wireframe:!0,lights:!1}),this.knot=new s.eaF(this.geometry,this.material),this.scene.add(this.knot),this.clock=new s.zD7,this.resize=this.resize.bind(this),this.onMouseMove=this.onMouseMove.bind(this),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.resize),window.addEventListener("orientationchange",this.resize),this.resize(),this.start(),this.smoothTransitionCamera()}onMouseMove(e){this.cursor.x=e.clientX/this.sizes.width-.5,this.cursor.y=e.clientY/this.sizes.height-.5;const i=3*this.cursor.x,t=3*-this.cursor.y;this.targetCameraPosition.set(i,t,1.2)}smoothTransitionCamera(){const e=this.targetCameraPosition.clone().sub(this.camera.position);this.camera.position.add(e.multiplyScalar(.006)),this.camera.lookAt(0,0,0),requestAnimationFrame(()=>this.smoothTransitionCamera())}resize(){this.sizes.width=window.innerWidth,this.sizes.height=window.innerHeight,this.camera.aspect=this.sizes.width/this.sizes.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}refresh(){}animate(){this.isRunning&&(this.renderer.render(this.scene,this.camera),this.uniforms.u_time.value+=this.clock.getDelta(),requestAnimationFrame(()=>this.animate()))}start(){this.isRunning||(this.isRunning=!0,this.clock.start(),this.animate())}stop(){this.isRunning=!1,this.clock.stop()}destroy(){this.stop(),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.resize),window.removeEventListener("orientationchange",this.resize),this.renderer.dispose()}}}}]);